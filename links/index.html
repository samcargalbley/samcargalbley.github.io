<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Links — Sam Cargal-Bley</title>
  <link rel="stylesheet" href="/assets/style.css">
</head>

<body>
  <div class="wrap">
    <header class="header">
      <h1 class="site-title">Sam Cargal-Bley</h1>
      <div class="site-location">New York, New York</div>

      <nav class="nav">
        <a href="/">About</a>
        <a href="/thoughts/">Thoughts</a>
        <a aria-current="page" href="/links/">Links</a>
        <a href="/blogs/">Blogs</a>
        <a href="/news/">News</a>
      </nav>
    </header>

    <div class="layout">
      <aside class="sidebar">
        <ul>
          <li><a href="#energy">Energy</a></li>
          <li><a href="#finance">Finance</a></li>
          <li><a href="#reading">Reading</a></li>
        </ul>
      </aside>

      <main class="content">
        <h1>Links</h1>

        <h2 id="energy">Energy</h2>
        <ul>
          <li><a href="https://www.eia.gov/">EIA</a></li>
          <li><a href="https://www.ferc.gov/">FERC</a></li>
          <li><a href="https://www.utilitydive.com/">Utility Dive</a></li>
          <li><a href="https://heatmap.news/">Heatmap</a></li>
        </ul>

        <h2 id="finance">Finance</h2>
        <ul>
          <li><a href="https://www.sec.gov/edgar/search/">SEC EDGAR</a></li>
          <li><a href="https://fred.stlouisfed.org/">FRED</a></li>
          <li><a href="https://www.tradingview.com/">TradingView</a></li>
        </ul>

        <h2 id="reading">Reading</h2>
        <ul>
          <li><a href="https://longform.org/">Longform</a></li>
          <li><a href="https://www.newyorker.com/">The New Yorker</a></li>
          <li><a href="https://www.lrb.co.uk/">London Review of Books</a></li>
        </ul>
      </main>
    </div>

    <footer class="footer">© <span id="y"></span></footer>
  </div>

  <script>
    // Footer year
    document.getElementById("y").textContent = new Date().getFullYear();

    // Sidebar only strong while actively scrolling
    let scrollTimer;
    window.addEventListener("scroll", () => {
      document.body.classList.add("scrolling");
      clearTimeout(scrollTimer);
      scrollTimer = setTimeout(() => {
        document.body.classList.remove("scrolling");
      }, 180);
    });

    // Scrollspy: highlight sidebar item for the section you're reading
    (function () {
      const sidebar = document.querySelector(".sidebar");
      if (!sidebar) return;

      const links = Array.from(sidebar.querySelectorAll('a[href^="#"]'));
      if (!links.length) return;

      const linkById = new Map();
      links.forEach(a => {
        const id = a.getAttribute("href").slice(1);
        if (id) linkById.set(id, a);
      });

      const targets = Array.from(linkById.keys())
        .map(id => document.getElementById(id))
        .filter(Boolean);

      if (!targets.length) return;

      const setActive = (id) => {
        links.forEach(a => a.classList.remove("is-active"));
        const a = linkById.get(id);
        if (a) a.classList.add("is-active");
      };

      const observer = new IntersectionObserver((entries) => {
        const visible = entries
          .filter(e => e.isIntersecting)
          .sort((a, b) => a.boundingClientRect.top - b.boundingClientRect.top);

        if (visible.length) setActive(visible[0].target.id);
      }, {
        root: null,
        threshold: [0.1, 0.25, 0.5],
        rootMargin: "-15% 0px -70% 0px"
      });

      targets.forEach(t => observer.observe(t));
      setActive(targets[0].id);
    })();
  </script>
</body>
</html>
